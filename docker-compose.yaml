services:
  web:
    build: .
    expose:
      - "80"
    restart: unless-stopped
    labels:
      - "coolify.managed=true"
      - "traefik.enable=true"
      - "traefik.http.routers.web-http.rule=Host(`orengen.io`) || Host(`www.orengen.io`)"
      - "traefik.http.routers.web-http.entrypoints=http"
      - "traefik.http.routers.web-http.middlewares=redirect-to-https"
      - "traefik.http.routers.web-https.rule=Host(`orengen.io`) || Host(`www.orengen.io`)"
      - "traefik.http.routers.web-https.entrypoints=https"
      - "traefik.http.routers.web-https.tls=true"
      - "traefik.http.routers.web-https.tls.certresolver=letsencrypt"
      - "traefik.http.services.web.loadbalancer.server.port=80"
      - "traefik.http.middlewares.redirect-to-https.redirectscheme.scheme=https"
